<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>load data and filter by quality</title>
        <script type="text/javascript" src="../d3.js"></script>
	</head>
	<body>
		<script type="text/javascript">

      var rowConverter = function(d) { //convert to integer
        return {
          county: d.Geo_NAME,
          median_income: parseFloat(d.median_income)
        };
      }

      var dataset;

      d3.csv("data/density_income_ny_counties.csv", rowConverter) //load csv

    .then(function(data) {
      console.log(data);
      dataset = data;
    })

       // .catch(function(error){
      //handle error
    //})

    d3.select("body").selectAll("p")
      .data(dataset)
      .enter()
      .append("p")
      .text(function(d) {
        return d.Geo_NAME;
      })  
      .style("color", function(d) {
        if (d.median_income > 65323) {
          return "red";
      } else {
          return "black"
        }



      });

      //function(dataset) {
      //return dataset;


      
      //use what you have learned so far to load the file of density and income data in the data folder in this chapter
      //file name is "density_income_ny_counties.csv"
      //see 03 for loading
      
      
      //make a paragraph for each county, and set the name of the county as its text
      //if the median income of the county is above the median income of new york state, turn the county name red
      
      //the median income for 2014 - 2018 period is $65,323
      //the key for the name of the county is "Geo_NAME"
      //the key for median income is "median_income"


		</script>
	</body>
</html>